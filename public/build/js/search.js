let paginationIndex=1,btnpaginationIndex=1,paginationLenght=1,paginationItemsLenght=3,public_services={},public_tags={},public_pictures={};function nextPage(e){if(paginationIndex!==paginationLenght)if(3===btnpaginationIndex){const e=document.getElementsByClassName("page");paginationIndex++;for(let t=0;t<e.length;t++){const n=t+paginationIndex-2;e[t].textContent=n,e[t].onclick=function(){goIndex(n,t+1)}}}else{document.getElementById("page-"+btnpaginationIndex).classList.remove("active"),btnpaginationIndex++,paginationIndex++;document.getElementById("page-"+btnpaginationIndex).classList.add("active")}createPublicService("{}",1)}function prevPage(e){if(paginationIndex>1&&1===btnpaginationIndex){const e=document.getElementsByClassName("page");paginationIndex--;for(let t=0;t<e.length;t++){const n=t+paginationIndex;e[t].textContent=n,e[t].onclick=function(){goIndex(n,t+1)}}}else if(1!==btnpaginationIndex&&1!==paginationIndex){document.getElementById("page-"+btnpaginationIndex).classList.remove("active"),btnpaginationIndex--,paginationIndex--;document.getElementById("page-"+btnpaginationIndex).classList.add("active")}createPublicService("{}",1)}function goIndex(e,t){////console.log(btnpaginationIndex);document.getElementById("page-"+btnpaginationIndex).classList.remove("active"),btnpaginationIndex=t,paginationIndex=e;document.getElementById("page-"+btnpaginationIndex).classList.add("active"),createPublicService("{}",1)}async function findServices(){try{const e=new FormData;let t={};if(["categoryid","provincia","canton","distrito","description"].forEach(n=>{try{document.getElementById(n).value&&(t[n]=document.getElementById(n).value,e.append(n,document.getElementById(n).value))}catch(e){}}),Object.keys(t).length){const t="http://localhost:3000/api/services/find",n=await fetch(t,{method:"POST",body:e});createPublicService(await n.json(),0)}else{const e="http://localhost:3000/api/services/all",t=await fetch(e);createPublicService(await t.json(),0)}}catch(e){}}function open_service(e){var t=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;localStorage.setItem("scrollPosition",t),document.body.style.overflow="hidden",showing_public_img_index=0;const n=public_services.find(t=>t.id==e),i=public_tags[n.id].filter(t=>t.serviceid==e),c=public_pictures[n.id].filter(t=>t.serviceid==e),d=c.find(e=>"1"==e.main);showing_public_img_index=c.indexOf(d),imgurl=d.url,public_index_pictures=public_pictures[n.id].filter(t=>t.serviceid==e);let a="";a+=n.provincia,a+=", ",a+=n.canton,a+=", ",a+=n.distrito;const s=n.title,o=n.description;let l=n.email,r=n.tel;const p=document.createElement("div");p.classList.add("overlay");const m=document.createElement("div");m.classList.add("content");const u=document.createElement("button");u.classList.add("report-button"),u.title="Reportar",u.innerHTML="!";const g=document.createElement("button");g.classList.add("close-button"),g.title="Cerrar",g.innerHTML="X",m.appendChild(u),m.appendChild(g),p.appendChild(m),document.body.appendChild(p),g.addEventListener("click",(function(){document.body.style.overflow="initial",p.remove();var e=localStorage.getItem("scrollPosition");null!==e&&window.scrollTo(0,e)}));const h=document.createElement("div");h.classList.add("product");const b=document.createElement("div");b.classList.add("slideshow-container"),b.setAttribute("id","previewImageDiv");const v=document.createElement("div");v.classList.add("mySlides","fade");const E=document.createElement("picture"),L=document.createElement("source");L.setAttribute("id","imgWebp"),L.setAttribute("srcset","/images/"+imgurl),L.setAttribute("type","image/webp"),E.appendChild(L);const x=document.createElement("source");x.setAttribute("id","imgJPG"),x.setAttribute("srcset","/images/"+imgurl),x.setAttribute("type","image/jpeg"),E.appendChild(x);const _=document.createElement("img");if(_.setAttribute("id","imgPreview"),_.setAttribute("loading","lazy"),_.setAttribute("src","/images/"+imgurl),_.style.maxHeight="50rem",E.appendChild(_),c.length>1){const e=document.createElement("a");e.classList.add("prev"),e.id="btn-prev",e.textContent="<",e.addEventListener("click",(function(){changePublicPreviewSlide(0,n.id)}));const t=document.createElement("a");t.classList.add("next"),t.id="btn-next",t.textContent=">",t.addEventListener("click",(function(){changePublicPreviewSlide(1,n.id)})),v.appendChild(e),v.appendChild(t)}v.appendChild(E),b.appendChild(v);const C=document.createElement("div");C.classList.add("infoSection");const f=document.createElement("h3");f.textContent=s;const I=document.createElement("div");I.classList.add("infoElemContainer");const y=document.createElement("div");y.classList.add("infoElemDesc");const w=document.createElement("h3");w.textContent="DESCRIPTION",y.appendChild(w),I.appendChild(y);const B=document.createElement("p");B.textContent=o,y.appendChild(B);const P=document.createElement("div");P.classList.add("infoElemAbout");const S=document.createElement("h3");S.textContent="ABOUT",P.appendChild(S),I.appendChild(P);const A=document.createElement("p");A.textContent=a,P.appendChild(A);const O=document.createElement("div");O.classList.add("infoElemWhat");const k=document.createElement("h3");k.textContent="WHAT TO BRING",O.appendChild(k),I.appendChild(O);for(let e=0;e<i.length;e++){////console.log(i[e].name);const t=document.createElement("p");t.textContent="- "+i[e].name,O.appendChild(t)}const q=document.createElement("button");q.classList.add("button-service");const T=document.createElement("img");T.src="/images/app/ico_mail.png",q.appendChild(T),q.addEventListener("click",(function(){window.open("mailto:"+l,"_blank")}));const W=document.createElement("button"),N=document.createElement("img");N.src="/images/app/ico_phone.png",W.appendChild(N),W.classList.add("button-service"),W.addEventListener("click",(function(){window.open("tel:"+r,"_blank")}));const R=document.createElement("button");R.classList.add("button-service");const D=document.createElement("img");D.src="/images/app/ico_whatsapp.png",R.appendChild(D),R.addEventListener("click",(function(){window.open("https://api.whatsapp.com/send?phone="+r,"_blank")}));const G=document.createElement("div");G.classList.add("buttons-container"),q.title="Contactar por email",W.title="Llamar por telefono",R.title="Contactar via Whatsapp",G.appendChild(q),G.appendChild(W),G.appendChild(R),B.classList.add("descriptionPreview"),h.appendChild(b),C.appendChild(f),C.appendChild(I),h.appendChild(C),m.appendChild(h),m.appendChild(G)}let public_index_pictures={},showing_public_img_index=0;function changePublicPreviewSlide(e,t){if(1===e)if(showing_public_img_index+1<public_index_pictures.length){showing_public_img_index++;const e="/images/"+public_index_pictures[showing_public_img_index].url;document.getElementById("imgPreview").setAttribute("src",e),document.getElementById("imgWebp").setAttribute("srcset",e),document.getElementById("imgJPG").setAttribute("srcset",e)}else{showing_public_img_index=0;const e="/images/"+public_index_pictures[showing_public_img_index].url;////console.log(e),document.getElementById("imgPreview").setAttribute("src",e),document.getElementById("imgWebp").setAttribute("srcset",e),document.getElementById("imgJPG").setAttribute("srcset",e)}else if(showing_public_img_index-1<0){showing_public_img_index=public_index_pictures.length-1;const e="/images/"+public_index_pictures[showing_public_img_index].url;////console.log(e),document.getElementById("imgPreview").setAttribute("src",e),document.getElementById("imgWebp").setAttribute("srcset",e),document.getElementById("imgJPG").setAttribute("srcset",e)}else{showing_public_img_index--;const e="/images/"+public_index_pictures[showing_public_img_index].url;document.getElementById("imgPreview").setAttribute("src",e),document.getElementById("imgWebp").setAttribute("srcset",e),document.getElementById("imgJPG").setAttribute("srcset",e)}}async function createPublicService(e,t){await opacityFade(0);if(0==t&&(public_services=e.services,public_tags=e.tags,public_pictures=e.pictures),paginationLenght=public_services.length/paginationItemsLenght,document.getElementById("page-3").classList.add("hidden"),0==public_services.length){document.getElementById("pagination").classList.add("hidden"),document.getElementById("pagination").classList.remove("pagination");const e=document.createElement("H3");e.textContent="No hay resultados",e.style="color:black;",opacityFade(1);const t=["San Jose","Heredia"],n=document.createElement("div");n.appendChild(e);for(let e of t){const t=document.createElement("a");t.classList.add("suggestedActivity"),t.textContent=e,t.addEventListener("click",t=>{document.querySelector("#description").value=e,findServices()}),n.appendChild(t)}return clean_Services(),void document.querySelector(".services-box").appendChild(n)}paginationLenght<=1&&paginationLenght>0?(paginationLenght=1,paginationIndex=1):paginationLenght<2&&paginationLenght>1?(paginationLenght=2,document.getElementById("page-3").classList.add("hidden")):document.getElementById("page-3").classList.remove("hidden");const n={};let i=0;public_services.length>3?(document.getElementById("pagination").classList.add("pagination"),document.getElementById("pagination").classList.remove("hidden")):(document.getElementById("pagination").classList.remove("pagination"),document.getElementById("pagination").classList.add("hidden"));for(let e in public_services)i<paginationIndex*paginationItemsLenght&&i>paginationIndex*paginationItemsLenght-(paginationItemsLenght+1)&&(n[e]=public_services[e]),i++;paginationIndex>paginationLenght?(document.querySelector("#nextPage").classList.add("hidden"),document.querySelector("#arrowBoxR").classList.remove("hidden")):(document.querySelector("#nextPage").classList.remove("hidden"),document.querySelector("#arrowBoxR").classList.add("hidden")),1==paginationIndex?(document.querySelector("#prevPage").classList.add("hidden"),document.querySelector("#arrowBoxL").classList.remove("hidden")):(document.querySelector("#prevPage").classList.remove("hidden"),document.querySelector("#arrowBoxL").classList.add("hidden"));const c=Object.values(n);clean_Services(),c.forEach(e=>{try{////console.log(e.title);const t=document.createElement("div");t.classList.add("public-service-container");const n=document.createElement("div");n.classList.add("public-service"),n.onclick=function(t){open_service(e.id)};const i=document.createElement("div");i.classList.add("public-service-image-container");const c=document.createElement("img");let d="";for(let t in public_pictures)if(public_pictures.hasOwnProperty(t)){const n=public_pictures[t];for(let t=0;t<n.length;t++){const i=n[t];1==i.main&&i.serviceid==e.id&&(d=i.url)}}c.src="/images/"+d,c.alt="",i.appendChild(c);let a=e.rating,s=a;const o=document.createElement("div");o.classList.add("public-service-info");const l=document.createElement("div");l.classList.add("rating-container");for(let e=0;e<5;e++){const e=document.createElement("img");e.classList.add("rating-star"),e.src=a<1&&a>0?"/build/img/half-star-rate.png":a<=0?"/build/img/empty-star-rate.png":"/build/img/filled-star-rate.png",a-=1,e.alt="rating star",l.appendChild(e)}const r=document.createElement("P");r.textContent="("+s+")",r.classList.add("rating-text");const p=document.createElement("h3");p.textContent="$"+e.price,p.classList.add("service-price");const m=document.createElement("h4");m.textContent=e.title,o.appendChild(m),o.appendChild(p),o.appendChild(l);let u="";u+=e.provincia,u+=", ",u+=e.canton,u+=", ",u+=e.distrito;const g=document.createElement("P");g.textContent=u;const h=document.createElement("div");h.classList.add("public-tags-location");let b="";for(let t in public_tags)if(public_tags.hasOwnProperty(t)){const n=public_tags[t];for(let t=0;t<n.length;t++){const i=n[t];t>0&&i.serviceid==e.id&&(b+=" | "),i.serviceid==e.id&&(b+=i.name)}}const v=document.createElement("P");v.textContent=b,h.appendChild(v),o.appendChild(g),n.appendChild(i);const E=document.createElement("p");window.screen.width;if(e.description.length>215){let t=e.description.substring(0,215);t+="...",E.textContent=t}else E.textContent=e.description;o.appendChild(E);const L=document.createElement("DIV");L.classList.add("service-button-container");const x=document.createElement("DIV");x.classList.add("service-button-container-center");const _=document.createElement("a");_.classList.add("btn-product-1"),_.classList.add("btn-product"),_.textContent="LEARN MORE",x.appendChild(_);const C=document.createElement("a");C.classList.add("btn-product-2"),C.classList.add("btn-product"),C.textContent="BOOK NOW",x.appendChild(C),L.appendChild(x),o.appendChild(L),n.appendChild(o),t.appendChild(n),document.getElementById("services-box").appendChild(t)}catch(e){}}),opacityFade(1)}function delay(e){return new Promise(t=>setTimeout(t,e))}function opacityFade(e){return new Promise(t=>{const n=document.querySelector("#services-box"),i=document.querySelector("#pagination");0===e?(n.classList.add("fadeOut"),n.classList.remove("fadeIn"),i.classList.add("fadeOut"),i.classList.remove("fadeIn")):(n.classList.add("fadeIn"),n.classList.remove("fadeOut"),i.classList.add("fadeIn"),i.classList.remove("fadeOut")),n.addEventListener("transitionend",(function e(){n.removeEventListener("transitionend",e),t()}))})}async function clean_Services(){var e=document.getElementById("services-box");let t=0;for(;e.firstChild&&t<3;)e.removeChild(e.firstChild),t++}